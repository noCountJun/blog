<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>

<!-- Content -->
<section>
					
	<!-- Content -->
	<h2 id="content">${boardInfo.BRD_TITLE }</h2>
	<div class="row">
		<div class="col-6 col-12-small">
			<p>조회수  : ${boardInfo.VIEW_CNT }</p>
		</div>
		<div class="col-6 col-12-small">
			<p>등록일 : ${boardInfo.REG_DT }</p>
		</div>
	</div>
	
	<div class="box">
		${boardInfo.BRD_CONT }
	</div>
	
	<p/>

	<hr class="major">
	
		
	
	
	
	<h3>Comment</h3>

	<c:if test="${not empty commentList}">
		<ul class="alt">
			<c:forEach var="commentInfo" items="${commentList}" varStatus="i">
				<li>
					<dt>
						${commentInfo.CMT_LOGIN_ID} 
						<span style="float: right;">
							${commentInfo.REG_DT}
							&nbsp;&nbsp;&nbsp;<a href="javascript:popupDelForm();" class="button small">delete</a>
						</span>
					</dt>
					
					<c:choose>
				        <c:when test="${commentInfo.DEL_YN eq 'Y'}">
				            <p><em>삭제된 댓글 입니다.</em></p>
				        </c:when>         
				        <c:otherwise>
				            <dd>
								<p>${commentInfo.CMT_CONT}</p>
							</dd>
						</c:otherwise>
				    </c:choose>
				</li>
			</c:forEach>
		</ul>
	</c:if>
	

	<form name="commentForm" id="commentForm" action="">
		<div class="row gtr-uniform">
			<div class="col-12">
				<textarea name="demo-message" id="cmtCont" placeholder="Enter your comment" rows="2" maxlength="100"></textarea>
			</div>
			<div class="col-6 col-12-xsmall">
				<input type="text" name="demo-name" id="cmtLoginId" placeholder="id" maxlength="10"/>
			</div>
			<div class="col-6 col-12-xsmall">
				<input type="password" name="demo-email" id="cmtPassword" placeholder="password" maxlength="10"/>
			</div>
			<div class="col-12">
				<ul class="actions">
					<li><input type="button" onclick="insertCommentAjax();" value="send comment" class="primary" /></li>
					<li><input type="reset" value="Reset" /></li>
				</ul>
			</div>
		</div>
	</form>




	<div class="row">
		<div class="col-6 col-12-small">
			<p>이전글 : 
				<c:choose>
			        <c:when test="${boardInfo.PRE_TITLE_ID eq '0'}">
			            ${boardInfo.PRE_TITLE }
			        </c:when>         
			        <c:otherwise>
			            <a href="/board/boardDetail/${boardInfo.PRE_TITLE_ID}">${boardInfo.PRE_TITLE }</a>
					</c:otherwise>
			    </c:choose>
			</p>
		</div>
		<div class="col-6 col-12-small">
			<p>다음글 : 
				<c:choose>
			        <c:when test="${boardInfo.NEXT_TITLE_ID eq '0'}">
			            ${boardInfo.NEXT_TITLE }
			        </c:when>         
			        <c:otherwise>
			            <a href="/board/boardDetail/${boardInfo.NEXT_TITLE_ID}">${boardInfo.NEXT_TITLE }</a>
					</c:otherwise>
			    </c:choose>
			</p>
		</div>
	</div>
</section>


<script type="text/javascript">
	function popupDelForm() {
		alert("팝업으로 delYn 업데이트 처리");
	}
	
	function insertCommentAjax(){
		
		
		alert(jQuery("#cmtCont").val());
		alert(jQuery("#cmtLoginId").val());
		alert(jQuery("#cmtPassword").val());
		
 		$.ajax({
			url:  "/mypage/mypageInfoListAjax",
			data: $("#gForm").serializeObject(),
			dataType: 'json',
			async: false,
			success: function(data){
				
				if(data != null) {
					
					mypageInfoListHtml(data);
					pageDivMake(data);
				}
				
			},
			error: function(xhr, status, err) {
                if (xhr.status == 401) {
                	location.href = "/";
                }
            }
		});	 
	}
</script>
